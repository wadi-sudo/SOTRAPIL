<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <title>SIG Sotrapil</title>
    <link
      rel="icon"
      href="{% static 'geoApp/logo2.png' %}"
      sizes="16x16"
      type="image/png"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- <script src="{% static 'geoApp/src/leaflet-src.js' %}"></script> -->
    <script src="{% static 'geoApp/src/leaflet.js' %}"></script>
    <script src="{% static 'geoApp/proj4.js' %}"></script>
    <script src="{% static 'geoApp/libs/proj4leaflet.js' %}"></script>
    <link rel="stylesheet" href="{% static 'geoApp/src/leaflet.css' %}" />

     <script src="{% static 'geoApp/WFST/leaflet-wfst.src.js' %}"></script>
     <script src="{% static 'geoApp/Leaflet.Editable.js' %}"></script> 

    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/plugins/L.Control.MousePosition.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/plugins/L.Control.Sidebar.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/plugins/Leaflet.PolylineMeasure.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/plugins/easy-button.css' %}"
    />

    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/css/font-awesome.min.css' %}"
    />

    <link rel="stylesheet" href="{% static 'geoApp/src/jquery-ui.min.css' %}" />

    <link
      rel="stylesheet"
      href="{% static 'geoApp/libs/jquery-ui-1.12.1/jquery-ui.css' %}"
    />
    <script src="{% static 'geoApp/libs/jquery-ui-1.12.1/external/jquery/jquery.js' %}"></script>
    <script src="{% static 'geoApp/libs/jquery-ui-1.12.1/jquery-ui.js' %}"></script>

    <script src="{% static 'geoApp/src/Control.MiniMap.js' %}"></script>

    <script src="{% static 'geoApp/src/turf.min.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/L.Control.MousePosition.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/L.Control.Sidebar.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/Leaflet.PolylineMeasure.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/easy-button.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet.sprite.js' %}"></script>
    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/L.Control.SlideMenu.css' %}"
    />
    <script src="{% static 'geoApp/src/L.Control.SlideMenu.js' %}"></script>
    <link
      href="{% static 'geoApp/libs/bootstrap-5.1.3-dist/css/bootstrap.min.css' %}"
      rel="stylesheet"
    />
    <script src="{% static 'geoApp/libs/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'geoApp/libs/L.Control.ZoomBar-master/src/L.Control.ZoomBar.js' %}"></script>
    <link
      rel="stylesheet"
      href="{% static 'geoApp/libs/L.Control.ZoomBar-master/src/L.Control.ZoomBar.css' %}"
    />
    <script src="{% static 'geoApp/libs/Leaflet.zoomslider-master/src/L.Control.Zoomslider.js' %}"></script>
    <link
      rel="stylesheet"
      href="{% static 'geoApp/libs/Leaflet.zoomslider-master/src/L.Control.Zoomslider.css' %}"
    />

    <script
      type="text/javascript"
      src="{% static 'geoApp/src/plugins/leaflet-draw/Leaflet.draw.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/src/plugins/leaflet-draw/Control.Draw.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/src/plugins/leaflet-draw/Toolbar.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/src/plugins/leaflet-draw/Tooltip.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/src/plugins/leaflet-draw/Leaflet.Draw.Event.js' %}"
    ></script>
    <link
      rel="stylesheet"
      href="{% static 'geoApp/src/plugins/leaflet-draw/leaflet.draw.css' %}"
    />
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/ext/GeometryUtil.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/ext/LatLngUtil.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/ext/LineUtil.Intersect.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/ext/Polygon.Intersect.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/ext/Polyline.Intersect.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/ext/TouchEvents.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/DrawToolbar.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.Feature.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.SimpleShape.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.Polyline.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.Circle.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.Marker.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.Polygon.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/draw/handler/Draw.Rectangle.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/EditToolbar.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/EditToolbar.Edit.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/EditToolbar.Delete.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/Edit.Poly.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/Edit.SimpleShape.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/Edit.Circle.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/Edit.Rectangle.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-draw/edit/handler/Edit.Marker.js' %}"></script>
    <script src="{% static 'geoApp/chart.js-4.1.1/package/dist/chart.umd.js' %}"></script>

    <link rel="stylesheet" href="{% static 'geoApp/style.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'geoApp/css/main2.css' %}"
      type="text/css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'geoApp/toastify.min.css' %}"
    />
    <script
      type="text/javascript"
      src="{% static 'geoApp/Toastify.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/shpwriter.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/FileSaver.js' %}"
    ></script>
    <script
      type="text/javascript"
      src="{% static 'geoApp/ActiveLayers.js' %}"
    ></script>
    <link rel="stylesheet" href="{% static 'geoApp/MarkerCluster.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'geoApp/MarkerCluster.Default.css' %}"
    />
    <script src="{% static 'geoApp/leaflet.markercluster.js' %}"></script>

    <script src="{% static 'geoApp/easyPrint/dist/bundle.js' %}"></script>
    <script src="{% static 'geoApp/screen.js' %}"></script>
    <script src="{% static 'geoApp/leaflet.browser.print/dist/leaflet.browser.print.min.js' %}"></script>
    <script src="{% static 'geoApp/leaflet-omnivore.min.js' %}"></script>
    <script src="{% static 'geoApp/jszip.js' %}"></script>
    <script src="{% static 'geoApp/shapefile/leaflet.shapefile/leaflet.shpfile.js' %}"></script>
    <script src="{% static 'geoApp/shapefile/leaflet.shapefile/shp.js' %}"></script>
    <!-- <script src="{% static 'geoApp/js/lib/proj4js-1.0.3/lib/proj4js-combined.js' %}"></script> -->
    <!-- <link
      rel="stylesheet"
      href="{% static 'geoApp/src/plugins/leaflet-styleeditor/css/Leaflet.StyleEditor.css' %}"
    /> -->
    <!-- <script src="{% static 'geoApp/src/plugins/leaflet-styleeditor/javascript/Leaflet.StyleEditor.js' %}"></script>
    <script src="{% static 'geoApp/src/plugins/leaflet-styleeditor/javascript/Leaflet.StyleForms.js' %}"></script> -->
    <script src="{% static 'geoApp/Leaflet.StyleEditor/dist/javascript/Leaflet.StyleEditor.js' %}"></script>
    <link
      rel="stylesheet"
      href="{% static 'geoApp//Leaflet.StyleEditor/dist/css/Leaflet.StyleEditor.css' %}"
    />
  </head>

  <body>
    <div
      class="navbar navbar-b navbar-expand-md fixed-top navbar-reduce"
      id="header-bar" 
    >
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <!-- <span class="navbar-toggler-icon"></span> -->
        <i class="fa fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div style="display: flex; flex-wrap: wrap; width: 90%">
          <div style="display: inline-flex; width: 45%">
            &nbsp<img
              class="cnct"
              src="{% static 'geoApp/CNCT.png'%}"
              width="65px"
              height="65px"
            />
            &nbsp<img
              class="sotrapil"
              src="{% static 'geoApp/zze.png'%}"
              width="85px"
              height="65px"
            />
          </div>

          <div
            style="
              text-align: center;
              color: #3a4486;
              width: 55%;
              min-width: 170px;
            "
          >
            <h2 class="titre">
              <a style="color: #3a4486" href="{% url 'index' %}"
                >SIG SOTRAPIL</a
              >
            </h2>
          </div>
        </div>
      </div>
      {% if request.user.is_authenticated %}
      <div
        style="
          display: flex;
          margin-top: 10px;
          width: 30%;
          justify-content: flex-end;
        "
      >

        <a href="{% url 'edit' %}">
          <h3 class="mynavtext" >
            <i class="fa fa-edit"></i></h3></a
        >&nbsp &nbsp 
        <a href="{% url 'admin' %}"
          ><h3 class="mynavtext"><i class="fa fa-user"></i></h3>
        </a>
        &nbsp &nbsp
        <a href="{% url 'logout' %}"
          ><h3 class="mynavtext"><i class="fa fa-sign-out"></i></h3
        ></a>
      </div>
      {% else %} <a href="{% url 'login' %}">Connexion</a> {% endif %}
    </div>

    <div class="container-fluid" id="all">
      <div class="row">
        <div class="col-md-12 map" id="map">
          <!-- <div
            id="mydiv"
            style="
              display: none;
              z-index: 100000;
              position: absolute;
              top: 20%;

              right: 50px;
              background-color: white;
              width: 100px;
              border-radius: 5px;
              padding: 5px;
              outline-color: #b8b8b8;
              outline-style: solid;
            "
          >
            <input
              style="z-index: 100000"
              type="checkbox"
              id="location"
              checked
            />
            Location <br />
            <input type="checkbox" id="pipeline" checked /> Pipeline <br />
            <input type="checkbox" id="site" checked /> Site
          </div> -->
        </div>

        <div class="col-lg-4 col-md-12" id="container2">
          <div id="stat">
            <!-- <h3 style="color: grey; text-align: center">Statistiques</h3> -->
          </div>

          <div id="statcontent">
            <canvas id="mychart" class="myowncharts"></canvas>
            <br />
            <canvas id="mychart2" class="myowncharts"></canvas>
            <br />
            <canvas id="mychart3" class="myowncharts"></canvas>
            <br />
            <canvas id="mychart4" class="myowncharts"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div id="side-bar" style="background-color: #f1f1f1">
      <a href="javascript:void(0)" class="closebtn" onclick="sidebarreturn()"
        >&times;</a
      >
      <br /><br /><br />

      <form autocomplete="off">
        <div style="display: inline-block">
          <div class="autocomplete" style="display: inline-block">
            <input
              id="myInput"
              type="text"
              name="myCountry"
              class="form-control"
              placeholder="Recherche"
              onkeyup="myFunction()"
              style="width: 97% !important"
            />
          </div>
          <button
            id="sub"
            type="button"
            onclick="myFunction()"
            class="stylebutton"
            style="position: absolute; width: 35px; height: 35px"
          >
            <i class="fa fa-search"></i>
          </button>
        </div>
      </form>

      <br /><br /><br />

      <div id="query_tab">
        <div
          style="
            color: rgba(54, 162, 235, 0.7);
            font-weight: bold;
            font-size: 24px;
            text-align: center;
          "
        >
          <label> Requête par Attributs</label>
        </div>
        <br />
        <div class="tab-content" id="nav-tabContent">
          <div
            class="tab-pane fade show active"
            id="nav-home"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <!-- <label for="layer"><b>Select Layer</b></label> -->
            <select
              id="layer"
              class="form-select form-select-sm"
              aria-label=".form-select-sm example"
            >
              <option selected>Sélectionner la couche</option>
            </select>
            <br />
            <!-- <label for="attributes"><b>Select Attribute</b></label> -->
            <select
              id="attributes"
              class="form-select form-select-sm"
              aria-label=".form-select-sm example"
            >
              <option selected>Sélectionner l'attribut</option>
            </select>
            <br />
            <!-- <label for="operator"><b>Select Attribute</b></label> -->
            <select
              id="operator"
              class="form-select form-select-sm"
              aria-label=".form-select-sm example"
            >
              <option selected>Sélectionner l'opérateur</option>
            </select>
            <br />
            <!-- 
                    <label for="value">Enter Value</label> -->
            <input
              list="types"
              class="form-control form-select-sm"
              id="value"
              name="value"
              placeholder="Entrer une valeur"
              autocomplete="off"
            />
            <datalist id="types">
              <option />
            </datalist>
            <br />
            <button onclick="query()" type="button" class="stylebutton">
              Charger
            </button>
            <button type="button" class="stylebutton" onclick="clear_all()">
              Réinitialiser
            </button>
          </div>
        </div>
      </div>

      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
      <div id="query_tab2">
        <div
          style="
            color: rgba(54, 162, 235, 0.7);
            font-weight: bold;
            font-size: 24px;
            text-align: center;
          "
        >
          <label> Requête Spatiale</label>
        </div>
        <br />
        <div class="tab-content">
          <div
            class="tab-pane fade show active"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <!-- <label for="layer2"><b>Select Layer</b></label> -->
            <select
              id="layer2"
              class="form-select form-select-sm"
              aria-label=".form-select-sm example"
            >
              <option selected>Sélectionner la couche</option>
            </select>

            <br />
            <!-- <label for="value2">Enter Value</label> -->
            <input
              type="text2"
              class="form-control form-select-sm"
              id="value2"
              name="value2"
              placeholder="Rayon en m"
              autocomplete="off"
            />

            <!-- <label for="x" >Longitude:</label><br> -->
            <input
              style="display: none; height: 0px"
              type="text"
              class="form-control form-select-sm"
              name="x1"
              id="x1"
              placeholder="Longitude"
              autocomplete="off"
            /><br />
            <!-- <label for="y" >Latitude:</label><br> -->
            <input
              style="display: none; height: 0px"
              type="text"
              class="form-control form-select-sm"
              name="y1"
              id="y1"
              placeholder="Latitude"
              autocomplete="off"
            />
            <button onclick="setmarker()" type="button" class="stylebutton">
              Positionner un marqueur
            </button>

            <!-- <button onclick="query2()" type="button" class="btn btn-dark btn-sm">Load</button> -->
            <button type="button" class="stylebutton" onclick="clear_all()">
              Réinitialiser
            </button>
          </div>
        </div>
        <br /><br /><br /><br />
        <div
          style="
            color: rgba(54, 162, 235, 0.7);
            font-weight: bold;
            font-size: 24px;
            text-align: center;
          "
        >
          <label> Prédictions</label>
        </div>
        <br />
        <div class="tab-content">
          <div
            class="tab-pane fade show active"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <form method="POST" action="{% url 'predict' %}" id="prediction">
              {% csrf_token %}

              <input
                class="form-control form-select-sm"
                type="date"
                id="date"
                name="date"
                required
              /><br />

              <!-- <input
                placeholder="nom de la pipeline"
                type="text"
                id="name"
                name="name"
                class="form-control form-select-sm"
                required
              /> -->
              <select
                id="name"
                name="name"
                class="form-control form-select-sm"
                required
              >
                <option value="" selected disabled hidden>
                  Choisir une pipeline
                </option>
                <option value="pipe1">Pipe1</option>
                <option value="pipe2">Pipe2</option>
                <option value="pipe3">Pipe3</option>
                <option value="pipe4">Pipe4</option>
                <option value="pipe5">Pipe5</option>
                <option value="pipe6">Pipe6</option>
                <option value="pipe7">Pipe7</option>
              </select>
              <br />

              <button type="submit" class="stylebutton">Prédir</button>
            </form>
          </div>
        </div>
      </div>
      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
      <!-- <button
        onclick="wms_layers()"
        type="button"
        id="wms_layers_btn"
        class="stylebutton"
      >
        Available WMS Layers
      </button> -->
      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    </div>
    <div id="table_data"></div>
    <!-- Scrollable modal -->

    <div
      class="modal fade"
      id="wms_layers_window"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable" id="movableDialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">
              Available WMS Layers
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <table id="table_wms_layers" class="table table-hover"></table>
          </div>
          <div class="modal-footer">
            <button
              onclick="close_wms_window()"
              type="button"
              class="btn btn-secondary btn-sm"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              onclick="add_layer()"
              type="button"
              id="add_map_btn"
              class="btn btn-primary btn-sm"
            >
              Add Layer to Map
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="{% static 'geoApp/MAIN.js' %}">
      
    </script>
  </body>
</html>
